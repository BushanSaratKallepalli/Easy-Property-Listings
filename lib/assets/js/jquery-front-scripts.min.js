function eplGetCookie(a){return EPL_Front_Js.get_cookie(a)}jQuery(document).ready(function(a){EPL_Front_Js={init:function(){this.sort_listings(),this.author_tabs(),this.default_map(),this.switch_view(),this.set_default_view(),this.listing_search_tabs()},property_search:function(){if(1==a("#property_id").length){var b=null;a("#property_id").keyup(function(){if(""==a("#property_id").val())return a(".epl-property-suggestion").fadeOut(),!1;null!=b&&clearTimeout(b);var c=a(this).val();data={action:"epl_search_listing",s:c},b=setTimeout(function(){b=null,a.ajax({type:"POST",data:data,url:ajaxurl,success:function(b){1==a(".epl-property-suggestion").length?a(".epl-property-suggestion").replaceWith(b):a("#property_id").after(b),a(".epl-property-suggestion").fadeIn()}})},300)}),a(document.body).on("click",".epl-property-suggestion li",function(b){a("#property_id").val(a(this).data("id")),a(".epl-property-suggestion").fadeOut().remove()})}},sort_listings:function(){jQuery("#epl-sort-listings").on("change",function(){var a=jQuery(this).val(),b=window.location.href.split("?")[0],c=window.location.href.split("?")[1],d=b.search("page");if(d>-1)var b=b.substring(0,d);if(null!=jQuery.getUrlVar("sortby")){c="?"+c;var e=/([?&]sortby)=([^#&]*)/g;c=c.replace(e,"$1="+a);var f=b+c}else if(null==c)var f=b+"?sortby="+a;else var f=b+"?"+c+"&sortby="+a;window.location.replace(f)})},get_cookie:function(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return unescape(d)},author_tabs:function(){jQuery("ul.epl-author-tabs li").click(function(){var a=jQuery(this).closest(".epl-author-box-container").attr("id"),b=jQuery(this).attr("data-tab");jQuery("#"+a+" ul.epl-author-tabs li").removeClass("epl-author-current"),jQuery("#"+a+" .epl-author-tab-content").removeClass("epl-author-current"),jQuery(this).addClass("epl-author-current"),jQuery("#"+a+" #"+b).addClass("epl-author-current")})},default_map:function(){function b(){d=new google.maps.Geocoder,eplmapcord=new google.maps.LatLng(e[0],e[1]);var a={center:eplmapcord,zoom:g};window.epldefaultmap=new google.maps.Map(document.getElementById("epl-default-map"),a),window.epldefaultmarker=new google.maps.Marker({map:epldefaultmap,position:eplmapcord})}function c(){d=new google.maps.Geocoder,d.geocode({address:f},function(b,c){if(c==google.maps.GeocoderStatus.OK){var d={center:b[0].geometry.location,zoom:g};epldefaultmap=new google.maps.Map(document.getElementById("epl-default-map"),d),epl_marker_icon="default.png",1!=i?a.ajax({type:"POST",url:epl_frontend_vars.ajaxurl,data:{action:"epl_update_listing_coordinates",coordinates:b[0].geometry.location.toString(),listid:h}}).done(function(a){}):epl_marker_icon="suburb.png",window.epldefaultmarker=new google.maps.Marker({map:epldefaultmap,position:b[0].geometry.location,icon:epl_frontend_vars.image_base+epl_marker_icon})}})}if(a("#epl-default-map").length&&"object"==typeof google&&"object"==typeof google.maps){var d,e=a("#epl-default-map").data("cord"),f=a("#epl-default-map").data("address"),g=a("#epl-default-map").data("zoom"),h=a("#epl-default-map").data("id"),i=a("#epl-default-map").data("suburb_mode");""!=e?(e=e.split(","),b()):""!=f&&c()}},set_default_view:function(){if(void 0!==eplGetCookie("preferredView")){var a=this.get_cookie("preferredView");jQuery('.epl-switch-view ul li[data-view="'+a+'"]').trigger("click")}else"grid"==epl_frontend_vars.epl_default_view_type&&jQuery('.epl-switch-view ul li[data-view="grid"]').trigger("click")},switch_view:function(){jQuery(".epl-switch-view ul li").click(function(){var b=jQuery(this).data("view");a.ajax({type:"POST",url:epl_frontend_vars.ajaxurl,data:{action:"epl_update_default_view",view:b}}).done(function(a){}),"undefined"==typeof listingsMasonEnabled&&(jQuery(".epl-switch-view ul li").removeClass("epl-current-view"),jQuery(this).addClass("epl-current-view"),"grid"==b?(jQuery(".epl-property-blog").addClass("epl-listing-grid-view"),jQuery(".epl-listing-grid-view.epl-property-blog").each(function(a){a+=1})):jQuery(".epl-property-blog").removeClass("epl-listing-grid-view"))})},listing_search_tabs:function(){jQuery("ul.property_search-tabs li").click(function(){var a=jQuery(this).attr("data-tab");jQuery("ul.property_search-tabs li").removeClass("epl-sb-current"),jQuery(".epl-search-form").removeClass("epl-sb-current"),jQuery(this).addClass("epl-sb-current"),jQuery("#"+a).addClass("epl-sb-current")})},get_url_vars:function(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b},get_url_var:function(a){return this.get_url_vars()[a]}},EPL_Front_Js.init()}),jQuery.extend({getUrlVars:function(){return EPL_Front_Js.get_url_vars()},getUrlVar:function(a){return EPL_Front_Js.get_url_var(a)}});